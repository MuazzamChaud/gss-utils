name: updateCsvcubedPackage
on:
  # repository_dispatch:
  #   types: [on-demand-test]
  push:
    branches:
      - 'MuazzamChaud/issue527'

jobs:
  check_dep:
    runs-on: ubuntu-latest
    name: Check python requirements file and update
    steps:
      - name: Checkout
        uses: actions/checkout@v2
      - name: Check requirements.txt
        uses: Verbalinsurection/track-pypi-version@1.1.0
        id: checkr
        with:
          compush: 'true'
          backup: 'false'
          reqfile: './requirements.txt'
      - name: Get if update needed output
        run: echo ${{ steps.checkr.outputs.commit }}
  updating_csvcubed_packge:
    name: Create branch to hold new updated csvcubed package
    steps:
    - uses: peterjgrainger/action-create-branch@v2.2.0
      env:
        GITHUB_TOKEN: ${{ secrets.GITHUB_TOKEN }}
      with:
        branch: 'csvcubed_package_update'
        sha: '${{ github.event.pull_request.head.sha }}'